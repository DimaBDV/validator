# Validator
namespace `Local\Classes\Validator\`

Пакет, реализующий функционал валидации данных с возможностью писать свои 
правила и функции валидации, а так же кастомизировать сообщения об ошибках

## Состав пакета
```
    Validator                       - Базовая директория
        |- Contracts                - Директория интерфейсов
        |- Exceptions               - Директория с классами исключений
        |- Rules                    - Директория с функциями (праавилами) валидации (Сюда лазать можно)
            |- #others directory    - Разрешается группировать правила в дополнительные директории
        |- RulesCore                - Директория со служебными классами (Restricted area)
```

## Как пользоваться

### Добавить свои правила

Классы правил лежат в директории `Rules`, там есть свой [README.md](Rules/README.md) описывающий как именно писать 
правила.

### Использование в проекте

##### Требуемые данные и их "внешний вид"
```php
// инициализация параметров

$rules = [      // Правила, по которым хотим проверить данные
    'message'   => 'required|string_length_min:2|string_length_max:5',
    'age'       => 'required|int'
];

$data = [       // Массив с данными для проверки
    'message'	=> 'Какое-то сообщение',
    'age'       => 22
];

$messages = [   // Свои сообщения об ошибках
    'message' => [
        'required'          => 'Обязательно для заполнения',
        'string_length_min' => 'Строка должна быть не менее 2 символов',
        'string_length_max' => 'Строка должна быть не более 5 символов',
    ],
    'age' => [
        'required'  => 'Обязательно для заполнения',
        'int'       => 'Ожидалось число'
    ]
];
```

##### Правила и сообщения об ошибках

> Обратите внимание на то, что ключи в массиве `$rules` и ключи первого уровня в массиве `$messages` **одинаковые**.
> А ключ сообщения об ошибке идентичен названию правила (например `required`). Но для правил с аргументом 
> (`string_length_min:2`) в качестве ключа используется только название правила (`string_length_min`)

Полный список правил можно увидеть вызвав метод ```$validator->getRulesList()```

##### Варианты проведения проверки

> **Внимание!** Ручная инициализация объекта `Validator()` **запрещена**! Фасад написан специально, чтобы объект 
> создавался внутри, так как могут добавиться специфические настройки, а ползать по проекту и искать каждый instance 
> я не хочу! _Просто представь что это не только **фасад**, а ещё и реализация **builder**_

```php
$validator = \Local\Classes\Validator\ValidatorFacade::make($rules, $data, $messages);

if ($validator->validate())
{
    # validation success
    # Если требуется достать только те данные которые указаны в правилах валидации
    $validatedData = $validator->validated();
} 
else
{
    # Получить список ошибок и что-то с ними сделать
    $errors = $validator->errors();
}

```

Если получение ошибок не требуется, а важно лишь узнать результат
```php
if(\Local\Classes\Validator\ValidatorFacade::validate($rules, $data))
{
    # validation success
}
```

>**Отдельно стоит отметить**, что параметр `$message` можно не устанавливать, в этом случае валидатор выдаст 
> стандартную ошибку: `Invalid property - {$property}. Validation failed in rule - {$rule}`

